# net

## OSI

### 应用层

- 通过应用进程间的交互来完成特定网络应用，应用层协议定义的是应用进间的通信和交互的规则，如：HTTP协议、邮件协议SMTP、域名系统DNS

### 传输层

- 负责向不同机器进程之间的通信提供通用的数据传输服务
- 协议
  - TCP
  - UDP

### 网络层

- 选择合适的网间路由和交换结点，确保数据及时传送
- 网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送

### 数据链路层

- 将网络层交下来的 IP 数据报组装成帧，在两个相邻节点间的链路上传送帧；每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）

### 物理层

- 电信号与数字信号的转换

## 三次握手

### 握手过程

- 客户端–发送带有 SYN 标志,、seq=x 的数据包–一次握手–服务端
- 服务端–发送带有 SYN/ACK 标志、ack=x+1、seq=y 的数据包–二次握手–客户端
- 客户端–发送带有带有 ACK 标志、ack=y+1，seq=x+1 的数据包–三次握手–服务端

### 为什么要三次握手

- 双方确认自己与对方的发送与接收是正常的
  - 第一次握手：Client 什么都不能确认；Server 确认了对方发送正常，自己接收正常
  - 第二次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：对方发送正常，自己接收正常
  - 第三次握手：Client 确认了：自己发送、接收正常，对方发送、接收正常；Server 确认了：自己发送、接收正常，对方发送、接收正常

### 第2次握手传回了ACK，为什么还要传回SYN

- 接收端传回发送端所发送的ACK是为了告诉客户端，我接收到的信息确实就是你所发送的信号了，这表明从客户端到服务端的通信是正常的
- 回传SYN则是为了建立并确认从服务端到客户端的通信

## 四次挥手

### 挥手过程

- 客户端-发送一个 FIN，用来关闭客户端到服务器的数据传送
- 服务器-收到这个 FIN，它返回一个 ACK，确认序号为收到的序号加1 。和 SYN 一样，一个 FIN 将占用一个序号
- 服务器-关闭与客户端的连接，发送一个FIN给客户端
- 客户端-发回 ACK 报文确认，并将确认序号设置为收到序号加1
