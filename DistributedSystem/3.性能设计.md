# 性能设计

## 缓存 Cache

### Cache Aside 更新模式

- 命中：从Cache中去数据，然后返回
- 实效：先从Cache中去数据，没有取到则到数据库中查询，并放入缓存
- 更新：先把数据写入数据库，然后使缓存实效
- ![cache_aside.png](cache_aside.png)
- ![cache_aside2.png](cache_aside2.png)

### Read/Write Through 更新模式

- Read Through中，当缓存失效时，在Cache Aside中由调用方负责将数据写入缓存，而在Read Through则用缓存服务自己来加载数据，对应用方透明
- Write Through中，当有数据更新时，如果没有命中缓存，则直接更新数据库，然后返回；否则，则更新缓存，然后由Cache更新数据库(同步操作)
- ![read/write_through.png](read:write_through.png)

### Write Behind Caching

- 更新数据时，只更新缓存，不更新数据库；然后由缓存异步批量更新数据库
- 数据不是强一致的，可能会丢失
- 逻辑比较复杂，需要track那些数据是被更新了的，需要刷到持久层上，
- ![write_behind_cache.png](write_behind_cache.png)

## 异步处理 Asynchronous

## 数据库扩展

## 秒杀 Flash Sales

## 边缘计算 Edge Computing
